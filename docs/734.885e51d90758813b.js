"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[734],{4734:(W,N,x)=>{x.r(N),x.d(N,{TF3Painter:()=>O});var D=x(4882),_=x(8872),H=x(4355),C=x(8868),B=x(1922),w=x(2843),b=x(4615);function L(A,i,e=0){for(let t=A.length-2;t>=0;--t){const n=i[t],l=i[t+1],d=A[t],y=A[t+1];if(n===e)return d;if(l===e)return y;if(n<e!=l<e)return d+(e-n)/(l-n)*(y-d)}return A[0]-1}class O extends H.TH2Painter{getObjectName(){return this.$func?.fName??"func"}getClassName(){return this.$func?._typename??_.clTF3}isTF1(){return!0}getPrimaryObject(){return this.$func}updateObject(i){if(!i||this.getClassName()!==i._typename)return!1;delete i.evalPar;const e=this.getHisto();if(this.webcanv_hist){const t=this.getPadPainter()?.findInPrimitives("Func",_.clTH2F);t&&this.updateAxes(e,t,this.getFramePainter())}return this.$func=i,this.createTF3Histogram(i,e),this.scanContent(),!0}redraw(i){return!this._use_saved_points&&("logx"===i||"logy"===i||"logy"===i||"zoom"===i)&&(this.createTF3Histogram(this.$func,this.getHisto()),this.scanContent()),super.redraw(i)}createTF3Histogram(i,e){const t=i.fSave.length-9;this._use_saved_points=t>0&&(_.settings.PreferSavedPoints||this.force_saved);const n=this.getFramePainter(),l=this.getPadPainter()?.getRootPad(!0),d=l?.fLogx,y=l?.fLogy,a=n?.getGrFuncs(this.second_x,this.second_y);let r=i.fXmin,P=i.fXmax,z=i.fYmin,S=i.fYmax,M=i.fZmin,c=i.fZmax;a?.zoom_xmin!==a?.zoom_xmax&&(r=Math.min(r,a.zoom_xmin),P=Math.max(P,a.zoom_xmax)),a?.zoom_ymin!==a?.zoom_ymax&&(z=Math.min(z,a.zoom_ymin),S=Math.max(S,a.zoom_ymax)),a?.zoom_zmin!==a?.zoom_zmax&&(M=Math.min(M,a.zoom_zmin),c=Math.max(c,a.zoom_zmax));const X=(m,f)=>{e.fNcells!==(m+2)*(f+2)&&(e.fNcells=(m+2)*(f+2),e.fArray=new Float32Array(e.fNcells)),e.fArray.fill(0),e.fXaxis.fNbins=m,e.fXaxis.fXbins=[],e.fYaxis.fNbins=f,e.fYaxis.fXbins=[],e.fXaxis.fXmin=r,e.fXaxis.fXmax=P,e.fYaxis.fXmin=z,e.fYaxis.fXmax=S,e.fMinimum=M,e.fMaximum=c};if(delete this._fail_eval,!this._use_saved_points){const m=Math.max(i.fNpx,20),f=Math.max(i.fNpy,20),o=Math.max(i.fNpz,20);let h=!1;!i.evalPar&&!(0,C.proivdeEvalPar)(i)&&(h=!0),X(m,f),d&&(0,C.produceTAxisLogScale)(e.fXaxis,m,r,P),y&&(0,C.produceTAxisLogScale)(e.fYaxis,f,z,S);const T=new Array(o),g=new Array(o);for(let s=0;s<o;++s)g[s]=M+s/(o-1)*(c-M);for(let s=0;s<f&&!h;++s)for(let v=0;v<m&&!h;++v){const E=e.fXaxis.GetBinCenter(v+1),u=e.fYaxis.GetBinCenter(s+1);let p=0;try{for(let F=0;F<o;++F)T[F]=i.evalPar(E,u,g[F]);p=L(g,T)}catch{h=!0}h||e.setBinContent(e.getBin(v+1,s+1),Number.isFinite(p)?p:0)}h&&(this._fail_eval=!0),h&&t>0&&(this._use_saved_points=!0)}if(this._use_saved_points){r=i.fSave[t],P=i.fSave[t+1],z=i.fSave[t+2],S=i.fSave[t+3],M=i.fSave[t+4],c=i.fSave[t+5];const m=Math.round(i.fSave[t+6]),f=Math.round(i.fSave[t+7]),o=Math.round(i.fSave[t+8]),h=(c-M)/o;X(m+1,f+1);const T=new Array(o+1),g=new Array(o+1);for(let s=0;s<=o;s++)g[s]=M+s*h;for(let s=0;s<=m;++s)for(let v=0;v<=f;++v){for(let u=0;u<=o;u++)T[u]=i.fSave[s+(m+1)*(v+(f+1)*u)];const E=L(g,T);e.setBinContent(e.getBin(s+1,v+1),Number.isFinite(E)?E:0)}}return e.fName="Func",(0,_.setHistogramTitle)(e,i.fTitle),e.fLineColor=i.fLineColor,e.fLineStyle=i.fLineStyle,e.fLineWidth=i.fLineWidth,e.fFillColor=i.fFillColor,e.fFillStyle=i.fFillStyle,e.fMarkerColor=i.fMarkerColor,e.fMarkerStyle=i.fMarkerStyle,e.fMarkerSize=i.fMarkerSize,e.fBits|=_.kNoStats,e}extractAxesProperties(i){super.extractAxesProperties(i);const e=this.$func,t=e?.fSave.length??0;t>9&&this._use_saved_points&&(this.xmin=Math.min(this.xmin,e.fSave[t-9]),this.xmax=Math.max(this.xmax,e.fSave[t-8]),this.ymin=Math.min(this.ymin,e.fSave[t-7]),this.ymax=Math.max(this.ymax,e.fSave[t-6]),this.zmin=Math.min(this.zmin,e.fSave[t-5]),this.zmax=Math.max(this.zmax,e.fSave[t-4])),e&&(this.xmin=Math.min(this.xmin,e.fXmin),this.xmax=Math.max(this.xmax,e.fXmax),this.ymin=Math.min(this.ymin,e.fYmin),this.ymax=Math.max(this.ymax,e.fYmax),this.zmin=Math.min(this.zmin,e.fZmin),this.zmax=Math.max(this.zmax,e.fZmax))}fillWebObjectOptions(i){i.fcust=this._fail_eval?"func_fail":""}static draw(i,e,t){return(0,D.A)(function*(){(0,_.isStr)(t)||(t="");let n=t.indexOf(";webcanv_hist"),l=!1,d=!1;n>=0&&(l=!0,t=t.slice(0,n)),n=t.indexOf(";force_saved"),n>=0&&(d=!0,t=t.slice(0,n));const y=new w.nC(t);let a;y.empty()||"gl"===t?t="surf1":"SAME"===y.opt&&(t="surf1 same"),(0===t.indexOf("same")||0===t.indexOf("SAME"))&&((0,B.Nn)(i)||(t="A_ADJUST_FRAME_"+t.slice(4))),l&&(a=new B.JW(i).getPadPainter()?.findInPrimitives("Func",_.clTH2F)),a||(a=(0,_.createHistogram)(_.clTH2F,20,20),a.fBits|=_.kNoStats);const r=new O(i,a);return r.$func=e,r.webcanv_hist=l,r.force_saved=d,r.createTF3Histogram(e,a),b.mf._drawHist(r,t)})()}}}}]);
//# sourceMappingURL=734.885e51d90758813b.js.map