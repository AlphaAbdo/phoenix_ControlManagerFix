"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[445],{9445:(S,P,g)=>{g.r(P),g.d(P,{TWebPaintingPainter:()=>m});var A=g(5072),B=g(2985),M=g(9640);class m extends M.JW{updateObject(e){return!!this.matchObjectType(e)&&(this.assignObject(e),!0)}redraw(){var e=this;return(0,A.A)(function*(){const r=e.getObject(),n=e.getAxisToSvgFunc();if(!r?.fOper||!n)return;let _,T,a,i=0,s={},h=null,b="none",x="";const c=r.fOper.split(";"),u=t=>{if(t===b||(h&&(h.attr("d",x),x="",h=null,b="none"),!t))return e;switch(b=t,h=e.draw_g.append("svg:path").attr("d",""),t){case"f":h.call(e.fillatt.func);break;case"l":h.call(e.lineatt.func).style("fill","none");break;case"m":h.call(e.markeratt.func)}return e},y=(t,d)=>{let f=0;const l={_typename:"any"};for(let o=0;o<d.length;++o){const p=t.indexOf(":",f+1);l[d[o]]=parseInt(t.slice(f+1,p>f?p:void 0)),f=p}return l},O=t=>{for(;++t<c.length;)switch(_=c[t][0],_){case"z":e.createAttLine({attr:y(c[t],["fLineColor","fLineStyle","fLineWidth"]),force:!0}),u();continue;case"y":e.createAttFill({attr:y(c[t],["fFillColor","fFillStyle"]),force:!0}),u();continue;case"x":e.createAttMarker({attr:y(c[t],["fMarkerColor","fMarkerStyle","fMarkerSize"]),force:!0}),u();continue;case"o":s=y(c[t],["fTextColor","fTextFont","fTextSize","fTextAlign","fTextAngle"]),s.fTextSize<0&&(s.fTextSize*=-.001),u();continue;case"r":case"b":{u("b"===_?"f":"l");const d=n.x(r.fBuf[i++]),f=n.y(r.fBuf[i++]),l=n.x(r.fBuf[i++]),o=n.y(r.fBuf[i++]);x+=`M${d},${f}h${l-d}v${o-f}h${d-l}z`;continue}case"l":case"f":for(u(_),T=parseInt(c[t].slice(1)),a=0;a<T;++a)x+=`${a>0?"L":"M"}${n.x(r.fBuf[i++])},${n.y(r.fBuf[i++])}`;"f"===_&&(x+="Z");continue;case"m":for(u(_),T=parseInt(c[t].slice(1)),e.markeratt.resetPos(),a=0;a<T;++a)x+=e.markeratt.create(n.x(r.fBuf[i++]),n.y(r.fBuf[i++]));continue;case"h":case"t":if(s.fTextSize){u();const d=s.fTextSize>1?s.fTextSize:e.getPadPainter().getPadHeight()*s.fTextSize,f=e.draw_g.append("svg:g");return e.startTextDrawingAsync(s.fTextFont,d,f).then(()=>{let l=c[t].slice(1),o=s.fTextAngle;if(o>=360&&(o-=360*Math.floor(o/360)),"h"===_){let p="";for(a=0;a<l.length;a+=2)p+=String.fromCharCode(parseInt(l.slice(a,a+2),16));l=p}return e.drawText({align:s.fTextAlign,x:n.x(r.fBuf[i++]),y:n.y(r.fBuf[i++]),rotate:-o,text:l,color:(0,B.oU)(s.fTextColor),latex:0,draw_g:f}),e.finishTextDrawing(f)}).then(()=>O(t))}continue;default:console.log(`unsupported operation ${_}`)}return Promise.resolve(!0)};return e.createG(),O(-1).then(()=>u())})()}static draw(e,r){return(0,A.A)(function*(){const n=new m(e,r);return n.addToPadPrimitives(),n.redraw()})()}}}}]);
//# sourceMappingURL=445.98b854bf978151d6.js.map