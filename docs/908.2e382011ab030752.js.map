{"version":3,"file":"908.2e382011ab030752.js","mappings":"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","names":["RH1Painter","RHistPainter","constructor","dom","histo","super","this","wheel_zoomy","scanContent","when_axis_changed","getHisto","nbinsx","extractAxesProperties","hmin","hmin_nz","hmax","hsum","isDisplayItem","fContMin","fContMinPos","fContMax","left","getSelectIndex","right","scan_xleft","scan_xright","value","err","first","i","getBinContent","Math","min","max","stat_entries","ymin_nz","draw_content","abs","ymin","ymax","dy","countStat","cond","xaxis","getAxis","res","name","meanx","meany","rmsx","rmsy","integral","entries","xmax","wmax","stat_sumw","stat_sumwx","stat_sumwx2","xx","w","GetBinCoord","sqrt","fillStatistic","stat","dostat","data","print_name","print_entries","floor","print_mean","print_rms","print_under","print_over","print_integral","print_skew","print_kurt","clearStat","addText","format","getBarBaseline","funcs","height","gry","swap_xy","Number","isFinite","options","BaseLine","scale_ymin","round","drawBars","handle","width","_this","_asyncToGenerator","createG","i1","i2","di","stepi","pmain","getFramePainter","x1","x2","grx1","grx2","y","gry1","bars","barsl","barsr","gry2","logx","grx","logy","BarOffset","BarWidth","BarStyle","fillatt","empty","setSolidColor","draw_g","append","attr","call","func","style","d3_rgb","color","brighter","formatRgb","darker","drawFilledErrors","_this2","bins1","bins2","x","yerr","getBinError","push","unshift","path1","buildSvgCurve","line","ErrorKind","path2","cmd","draw1DBins","_this3","rect","getFrameRect","removeG","createHistDrawAttributes","prepareDraw","extra","only_indexes","getGrFuncs","second_x","second_y","Bar","drawHistBins","_this4","want_tooltip","isBatchMode","settings","Tooltip","exclude_zero","Zero","show_errors","Error","show_line","Line","show_text","Text","startx","currx","curry","curry_min","curry_max","prevy","prevx","bestimin","bestimax","my","yerr1","yerr2","bincont","binerr","mx1","mx2","midx","text_font","show_markers","Mark","lastbin","path_fill","path_err","path_marker","path_line","hints_err","endx","endy","dend","pr","Promise","resolve","v7EvalAttr","createv7AttMarker","markeratt","size","resetPos","v7EvalFont","align","angle","TextKind","space","setAngle","setSize","startTextDrawingAsync","then","use_minmax","lw","lineatt","gStyle","fEndErrorSize","draw_markers","draw_bin","besti","lbl","toString","floatToString","fPaintTextFormat","drawText","text","latex","length","create","edx","errorX","mmx1","fill_for_interactive","Hist","h0","gry0","close_path","finishTextDrawing","getBinTooltips","bin","tips","getObjectHint","stepx","xlbl","getAxisBinTip","cont","axisAsText","toPrecision","$baseh","fStatFormat","processTooltipEvent","pnt","ttrect","selectChild","Mode3D","remove","getFrameWidth","getFrameHeight","show_rect","findbin","gapx","l","r","GetBinGrX","GetBinGrY","yy","pnt_x","pnt_y","m","best","dist","dx","nx","midy","touch","nproc","msize","getFullSize","title","fTitle","exact","color1","color2","getFillColorAlt","lines","disabled","changed","addHighlightStyle","property","menu","menu_dist","radius","user_info","obj","fillHistContextMenu","add","autoZoom","opts","getSupportedDrawOptions","addDrawMenu","arg","indexOf","kInspect","showInspector","decodeOptions","need_fillcol","change","interactiveRedraw","indx","zoom","canZoomInside","axis","FindBin","callDrawFunc","reason","_this5","main","mode3d","isMainPainter","draw3D","draw2D","_this6","clear3DScene","drawFrameAxes","drawingBins","addInteractivity","_this7","console","log","redraw","_this8","_draw","painter","opt","ensureRCanvas","setAsMainPainter","fErrorX","Fill","Lego","Surf","TextAngle","AutoColor","FrontBox","BackBox","d","DrawOptions","check","Render3D","constants","fromString","part","toLowerCase","kind","sub","has_main","getMainPainter","o","draw","RH1Painter2D","is_main","zmult","fHistTopMargin","resize3D","render3D","deleteAttr","assignFrame3DMethods","create3DScene","setAxesRanges","xmin","set3DOptions","drawXYZ","toplevel","RAxisPainter","use_y_for_z","Zooming","ndim","v7","drawBinsLego","updatePaletteDraw","addKeysHandler"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["../node_modules/jsroot/modules/hist2d/RH1Painter.mjs","../node_modules/jsroot/modules/hist/RH1Painter.mjs"],"sourcesContent":["import { gStyle, settings, constants, kInspect } from '../core.mjs';\nimport { rgb as d3_rgb } from '../d3.mjs';\nimport { floatToString, DrawOptions, buildSvgCurve, addHighlightStyle } from '../base/BasePainter.mjs';\nimport { RHistPainter } from './RHistPainter.mjs';\nimport { ensureRCanvas } from '../gpad/RCanvasPainter.mjs';\n\n\n/**\n * @summary Painter for RH1 classes\n *\n * @private\n */\n\nclass RH1Painter extends RHistPainter {\n\n   /** @summary Constructor\n     * @param {object|string} dom - DOM element or id\n     * @param {object} histo - histogram object */\n   constructor(dom, histo) {\n      super(dom, histo);\n      this.wheel_zoomy = false;\n   }\n\n   /** @summary Scan content */\n   scanContent(when_axis_changed) {\n      // if when_axis_changed === true specified, content will be scanned after axis zoom changed\n\n      const histo = this.getHisto();\n      if (!histo) return;\n\n      if (!this.nbinsx && when_axis_changed) when_axis_changed = false;\n\n      if (!when_axis_changed)\n         this.extractAxesProperties(1);\n\n      let hmin = 0, hmin_nz = 0, hmax = 0, hsum = 0;\n\n      if (this.isDisplayItem()) {\n         // take min/max values from the display item\n         hmin = histo.fContMin;\n         hmin_nz = histo.fContMinPos;\n         hmax = histo.fContMax;\n         hsum = hmax;\n      } else {\n         const left = this.getSelectIndex('x', 'left'),\n               right = this.getSelectIndex('x', 'right');\n\n         if (when_axis_changed)\n            if ((left === this.scan_xleft) && (right === this.scan_xright)) return;\n\n\n         this.scan_xleft = left;\n         this.scan_xright = right;\n\n         let first = true, value, err;\n\n         for (let i = 0; i < this.nbinsx; ++i) {\n            value = histo.getBinContent(i+1);\n            hsum += value;\n\n            if ((i<left) || (i>=right)) continue;\n\n            if (value > 0)\n               if ((hmin_nz === 0) || (value<hmin_nz)) hmin_nz = value;\n            if (first) {\n               hmin = hmax = value;\n               first = false;\n            }\n\n            err = 0;\n\n            hmin = Math.min(hmin, value - err);\n            hmax = Math.max(hmax, value + err);\n         }\n      }\n\n      this.stat_entries = hsum;\n\n      this.hmin = hmin;\n      this.hmax = hmax;\n\n      this.ymin_nz = hmin_nz; // value can be used to show optimal log scale\n\n      if ((this.nbinsx === 0) || ((Math.abs(hmin) < 1e-300) && (Math.abs(hmax) < 1e-300)))\n         this.draw_content = false;\n      else\n         this.draw_content = true;\n\n      if (this.draw_content) {\n         if (hmin >= hmax) {\n            if (hmin === 0) {\n               this.ymin = 0;\n               this.ymax = 1;\n            } else if (hmin < 0) {\n               this.ymin = 2 * hmin;\n               this.ymax = 0;\n            } else {\n               this.ymin = 0;\n               this.ymax = hmin * 2;\n            }\n         } else {\n            const dy = (hmax - hmin) * 0.05;\n            this.ymin = hmin - dy;\n            if ((this.ymin < 0) && (hmin >= 0)) this.ymin = 0;\n            this.ymax = hmax + dy;\n         }\n      }\n   }\n\n   /** @summary Count statistic */\n   countStat(cond) {\n      const histo = this.getHisto(), xaxis = this.getAxis('x'),\n            left = this.getSelectIndex('x', 'left'),\n            right = this.getSelectIndex('x', 'right'),\n            stat_sumwy = 0, stat_sumwy2 = 0,\n            res = { name: 'histo', meanx: 0, meany: 0, rmsx: 0, rmsy: 0, integral: 0, entries: this.stat_entries, xmax: 0, wmax: 0 };\n      let stat_sumw = 0, stat_sumwx = 0, stat_sumwx2 = 0,\n          i, xx = 0, w = 0, xmax = null, wmax = null;\n\n      for (i = left; i < right; ++i) {\n         xx = xaxis.GetBinCoord(i+0.5);\n\n         if (cond && !cond(xx)) continue;\n\n         w = histo.getBinContent(i + 1);\n\n         if ((xmax === null) || (w > wmax)) { xmax = xx; wmax = w; }\n\n         stat_sumw += w;\n         stat_sumwx += w * xx;\n         stat_sumwx2 += w * xx**2;\n      }\n\n      res.integral = stat_sumw;\n\n      if (Math.abs(stat_sumw) > 1e-300) {\n         res.meanx = stat_sumwx / stat_sumw;\n         res.meany = stat_sumwy / stat_sumw;\n         res.rmsx = Math.sqrt(Math.abs(stat_sumwx2 / stat_sumw - res.meanx**2));\n         res.rmsy = Math.sqrt(Math.abs(stat_sumwy2 / stat_sumw - res.meany**2));\n      }\n\n      if (xmax !== null) {\n         res.xmax = xmax;\n         res.wmax = wmax;\n      }\n\n      return res;\n   }\n\n   /** @summary Fill statistic */\n   fillStatistic(stat, dostat /* , dofit */) {\n      const histo = this.getHisto(),\n          data = this.countStat(),\n          print_name = dostat % 10,\n          print_entries = Math.floor(dostat / 10) % 10,\n          print_mean = Math.floor(dostat / 100) % 10,\n          print_rms = Math.floor(dostat / 1000) % 10,\n          print_under = Math.floor(dostat / 10000) % 10,\n          print_over = Math.floor(dostat / 100000) % 10,\n          print_integral = Math.floor(dostat / 1000000) % 10,\n          print_skew = Math.floor(dostat / 10000000) % 10,\n          print_kurt = Math.floor(dostat / 100000000) % 10;\n\n      // make empty at the beginning\n      stat.clearStat();\n\n      if (print_name > 0)\n         stat.addText(data.name);\n\n      if (print_entries > 0)\n         stat.addText('Entries = ' + stat.format(data.entries, 'entries'));\n\n      if (print_mean > 0)\n         stat.addText('Mean = ' + stat.format(data.meanx));\n\n      if (print_rms > 0)\n         stat.addText('Std Dev = ' + stat.format(data.rmsx));\n\n      if (print_under > 0)\n         stat.addText('Underflow = ' + stat.format(histo.getBinContent(0), 'entries'));\n\n      if (print_over > 0)\n         stat.addText('Overflow = ' + stat.format(histo.getBinContent(this.nbinsx+1), 'entries'));\n\n      if (print_integral > 0)\n         stat.addText('Integral = ' + stat.format(data.integral, 'entries'));\n\n      if (print_skew > 0)\n         stat.addText('Skew = <not avail>');\n\n      if (print_kurt > 0)\n         stat.addText('Kurt = <not avail>');\n\n      return true;\n   }\n\n   /** @summary Get baseline for bar drawings\n    * @private */\n   getBarBaseline(funcs, height) {\n      let gry = funcs.swap_xy ? 0 : height;\n      if (Number.isFinite(this.options.BaseLine) && (this.options.BaseLine >= funcs.scale_ymin))\n         gry = Math.round(funcs.gry(this.options.BaseLine));\n      return gry;\n   }\n\n   /** @summary Draw histogram as bars */\n   async drawBars(handle, funcs, width, height) {\n      this.createG(true);\n\n      const left = handle.i1, right = handle.i2, di = handle.stepi,\n            pmain = this.getFramePainter(),\n            histo = this.getHisto(), xaxis = this.getAxis('x');\n      let i, x1, x2, grx1, grx2, y, gry1, w,\n          bars = '', barsl = '', barsr = '';\n\n      const gry2 = this.getBarBaseline(funcs, height);\n\n      for (i = left; i < right; i += di) {\n         x1 = xaxis.GetBinCoord(i);\n         x2 = xaxis.GetBinCoord(i+di);\n\n         if (funcs.logx && (x2 <= 0)) continue;\n\n         grx1 = Math.round(funcs.grx(x1));\n         grx2 = Math.round(funcs.grx(x2));\n\n         y = histo.getBinContent(i+1);\n         if (funcs.logy && (y < funcs.scale_ymin)) continue;\n         gry1 = Math.round(funcs.gry(y));\n\n         w = grx2 - grx1;\n         grx1 += Math.round(this.options.BarOffset*w);\n         w = Math.round(this.options.BarWidth*w);\n\n         if (pmain.swap_xy)\n            bars += `M${gry2},${grx1}h${gry1-gry2}v${w}h${gry2-gry1}z`;\n         else\n            bars += `M${grx1},${gry1}h${w}v${gry2-gry1}h${-w}z`;\n\n         if (this.options.BarStyle > 0) {\n            grx2 = grx1 + w;\n            w = Math.round(w / 10);\n            if (pmain.swap_xy) {\n               barsl += `M${gry2},${grx1}h${gry1-gry2}v${w}h${gry2-gry1}z`;\n               barsr += `M${gry2},${grx2}h${gry1-gry2}v${-w}h${gry2-gry1}z`;\n            } else {\n               barsl += `M${grx1},${gry1}h${w}v${gry2-gry1}h${-w}z`;\n               barsr += `M${grx2},${gry1}h${-w}v${gry2-gry1}h${w}z`;\n            }\n         }\n      }\n\n      if (this.fillatt.empty()) this.fillatt.setSolidColor('blue');\n\n      if (bars) {\n         this.draw_g.append('svg:path')\n                    .attr('d', bars)\n                    .call(this.fillatt.func);\n      }\n\n      if (barsl) {\n         this.draw_g.append('svg:path')\n               .attr('d', barsl)\n               .call(this.fillatt.func)\n               .style('fill', d3_rgb(this.fillatt.color).brighter(0.5).formatRgb());\n      }\n\n      if (barsr) {\n         this.draw_g.append('svg:path')\n               .attr('d', barsr)\n               .call(this.fillatt.func)\n               .style('fill', d3_rgb(this.fillatt.color).darker(0.5).formatRgb());\n       }\n\n       return true;\n   }\n\n   /** @summary Draw histogram as filled errors */\n   async drawFilledErrors(handle, funcs /* , width, height */) {\n      this.createG(true);\n\n      const left = handle.i1, right = handle.i2, di = handle.stepi,\n            histo = this.getHisto(), xaxis = this.getAxis('x'),\n            bins1 = [], bins2 = [];\n      let i, x, grx, y, yerr, gry;\n\n      for (i = left; i < right; i += di) {\n         x = xaxis.GetBinCoord(i+0.5);\n         if (funcs.logx && (x <= 0)) continue;\n         grx = Math.round(funcs.grx(x));\n\n         y = histo.getBinContent(i+1);\n         yerr = histo.getBinError(i+1);\n         if (funcs.logy && (y-yerr < funcs.scale_ymin)) continue;\n\n         gry = Math.round(funcs.gry(y + yerr));\n         bins1.push({ grx, gry });\n\n         gry = Math.round(funcs.gry(y - yerr));\n         bins2.unshift({ grx, gry });\n      }\n\n      const path1 = buildSvgCurve(bins1, { line: this.options.ErrorKind !== 4 }),\n            path2 = buildSvgCurve(bins2, { line: this.options.ErrorKind !== 4, cmd: 'L' });\n\n      if (this.fillatt.empty()) this.fillatt.setSolidColor('blue');\n\n      this.draw_g.append('svg:path')\n                 .attr('d', path1 + path2 + 'Z')\n                 .call(this.fillatt.func);\n\n      return true;\n   }\n\n   /** @summary Draw 1D histogram as SVG */\n   async draw1DBins() {\n      const pmain = this.getFramePainter(),\n          rect = pmain.getFrameRect();\n\n      if (!this.draw_content || (rect.width <= 0) || (rect.height <= 0)) {\n         this.removeG();\n         return false;\n      }\n\n      this.createHistDrawAttributes();\n\n      const handle = this.prepareDraw({ extra: 1, only_indexes: true }),\n          funcs = pmain.getGrFuncs(this.options.second_x, this.options.second_y);\n\n      if (this.options.Bar)\n         return this.drawBars(handle, funcs, rect.width, rect.height);\n\n      if ((this.options.ErrorKind === 3) || (this.options.ErrorKind === 4))\n         return this.drawFilledErrors(handle, funcs, rect.width, rect.height);\n\n      return this.drawHistBins(handle, funcs, rect.width, rect.height);\n   }\n\n   /** @summary Draw histogram bins */\n   async drawHistBins(handle, funcs, width, height) {\n      this.createG(true);\n\n      const options = this.options,\n            left = handle.i1,\n            right = handle.i2,\n            di = handle.stepi,\n            histo = this.getHisto(),\n            want_tooltip = !this.isBatchMode() && settings.Tooltip,\n            xaxis = this.getAxis('x'),\n            exclude_zero = !options.Zero,\n            show_errors = options.Error,\n            show_line = options.Line,\n            show_text = options.Text;\n      let show_markers = options.Mark,\n          res = '', lastbin = false,\n          startx, currx, curry, x, grx, y, gry, curry_min, curry_max, prevy, prevx, i, bestimin, bestimax,\n          path_fill = null, path_err = null, path_marker = null, path_line = null,\n          hints_err = null,\n          endx = '', endy = '', dend = 0, my, yerr1, yerr2, bincont, binerr, mx1, mx2, midx,\n          text_font, pr = Promise.resolve();\n\n      if (show_errors && !show_markers && (this.v7EvalAttr('marker_style', 1) > 1))\n         show_markers = true;\n\n      if (options.ErrorKind === 2) {\n         if (this.fillatt.empty()) show_markers = true;\n                              else path_fill = '';\n      } else if (options.Error) {\n         path_err = '';\n         hints_err = want_tooltip ? '' : null;\n      }\n\n      if (show_line) path_line = '';\n\n      if (show_markers) {\n         // draw markers also when e2 option was specified\n         this.createv7AttMarker();\n         if (this.markeratt.size > 0) {\n            // simply use relative move from point, can optimize in the future\n            path_marker = '';\n            this.markeratt.resetPos();\n         } else\n            show_markers = false;\n      }\n\n      if (show_text) {\n         text_font = this.v7EvalFont('text', { size: 20, color: 'black', align: 22 });\n\n         if (!text_font.angle && !options.TextKind) {\n             const space = width / (right - left + 1);\n             if (space < 3 * text_font.size) {\n                text_font.setAngle(270);\n                text_font.setSize(Math.round(space*0.7));\n             }\n         }\n\n         pr = this.startTextDrawingAsync(text_font, 'font');\n      }\n\n      return pr.then(() => {\n         // if there are too many points, exclude many vertical drawings at the same X position\n         // instead define min and max value and made min-max drawing\n         let use_minmax = ((right-left) > 3*width);\n\n         if (options.ErrorKind === 1) {\n            const lw = this.lineatt.width + gStyle.fEndErrorSize;\n            endx = `m0,${lw}v${-2*lw}m0,${lw}`;\n            endy = `m${lw},0h${-2*lw}m${lw},0`;\n            dend = Math.floor((this.lineatt.width-1)/2);\n         }\n\n         const draw_markers = show_errors || show_markers;\n\n         if (draw_markers || show_text || show_line) use_minmax = true;\n\n         const draw_bin = besti => {\n            bincont = histo.getBinContent(besti+1);\n            if (!exclude_zero || (bincont !== 0)) {\n               mx1 = Math.round(funcs.grx(xaxis.GetBinCoord(besti)));\n               mx2 = Math.round(funcs.grx(xaxis.GetBinCoord(besti+di)));\n               midx = Math.round((mx1+mx2)/2);\n               my = Math.round(funcs.gry(bincont));\n               yerr1 = yerr2 = 20;\n               if (show_errors) {\n                  binerr = histo.getBinError(besti+1);\n                  yerr1 = Math.round(my - funcs.gry(bincont + binerr)); // up\n                  yerr2 = Math.round(funcs.gry(bincont - binerr) - my); // down\n               }\n\n               if (show_text && (bincont !== 0)) {\n                  const lbl = (bincont === Math.round(bincont)) ? bincont.toString() : floatToString(bincont, gStyle.fPaintTextFormat);\n\n                  if (text_font.angle)\n                     this.drawText({ align: 12, x: midx, y: Math.round(my - 2 - text_font.size / 5), text: lbl, latex: 0 });\n                  else\n                     this.drawText({ x: Math.round(mx1 + (mx2 - mx1) * 0.1), y: Math.round(my - 2 - text_font.size), width: Math.round((mx2 - mx1) * 0.8), height: text_font.size, text: lbl, latex: 0 });\n               }\n\n               if (show_line && (path_line !== null))\n                  path_line += ((path_line.length === 0) ? 'M' : 'L') + midx + ',' + my;\n\n               if (draw_markers) {\n                  if ((my >= -yerr1) && (my <= height + yerr2)) {\n                     if (path_fill !== null)\n                        path_fill += `M${mx1},${my-yerr1}h${mx2-mx1}v${yerr1+yerr2+1}h${mx1-mx2}z`;\n                     if (path_marker !== null)\n                        path_marker += this.markeratt.create(midx, my);\n                     if (path_err !== null) {\n                        let edx = 5;\n                        if (this.options.errorX > 0) {\n                           edx = Math.round((mx2-mx1)*this.options.errorX);\n                           const mmx1 = midx - edx, mmx2 = midx + edx;\n                           path_err += `M${mmx1+dend},${my}${endx}h${mmx2-mmx1-2*dend}${endx}`;\n                        }\n                        path_err += `M${midx},${my-yerr1+dend}${endy}v${yerr1+yerr2-2*dend}${endy}`;\n                        if (hints_err !== null)\n                           hints_err += `M${midx-edx},${my-yerr1}h${2*edx}v${yerr1+yerr2}h${-2*edx}z`;\n                     }\n                  }\n               }\n            }\n         };\n\n         for (i = left; i <= right; i += di) {\n            x = xaxis.GetBinCoord(i);\n\n            if (funcs.logx && (x <= 0)) continue;\n\n            grx = Math.round(funcs.grx(x));\n\n            lastbin = (i > right - di);\n\n            if (lastbin && (left < right))\n               gry = curry;\n            else {\n               y = histo.getBinContent(i+1);\n               gry = Math.round(funcs.gry(y));\n            }\n\n            if (res.length === 0) {\n               bestimin = bestimax = i;\n               prevx = startx = currx = grx;\n               prevy = curry_min = curry_max = curry = gry;\n               res = 'M'+currx+','+curry;\n            } else\n            if (use_minmax) {\n               if ((grx === currx) && !lastbin) {\n                  if (gry < curry_min) bestimax = i; else\n                  if (gry > curry_max) bestimin = i;\n                  curry_min = Math.min(curry_min, gry);\n                  curry_max = Math.max(curry_max, gry);\n                  curry = gry;\n               } else {\n                  if (draw_markers || show_text || show_line) {\n                     if (bestimin === bestimax) draw_bin(bestimin); else\n                        if (bestimin < bestimax) { draw_bin(bestimin); draw_bin(bestimax); } else {\n                           draw_bin(bestimax); draw_bin(bestimin);\n                        }\n                  }\n\n                  // when several points as same X differs, need complete logic\n                  if (!draw_markers && ((curry_min !== curry_max) || (prevy !== curry_min))) {\n                     if (prevx !== currx)\n                        res += 'h'+(currx-prevx);\n\n                     if (curry === curry_min) {\n                        if (curry_max !== prevy)\n                           res += 'v' + (curry_max - prevy);\n                        if (curry_min !== curry_max)\n                           res += 'v' + (curry_min - curry_max);\n                     } else {\n                        if (curry_min !== prevy)\n                           res += 'v' + (curry_min - prevy);\n                        if (curry_max !== curry_min)\n                           res += 'v' + (curry_max - curry_min);\n                        if (curry !== curry_max)\n                        res += 'v' + (curry - curry_max);\n                     }\n\n                     prevx = currx;\n                     prevy = curry;\n                  }\n\n                  if (lastbin && (prevx !== grx))\n                     res += 'h'+(grx-prevx);\n\n                  bestimin = bestimax = i;\n                  curry_min = curry_max = curry = gry;\n                  currx = grx;\n               }\n            } else\n            if ((gry !== curry) || lastbin) {\n               if (grx !== currx) res += 'h'+(grx-currx);\n               if (gry !== curry) res += 'v'+(gry-curry);\n               curry = gry;\n               currx = grx;\n            }\n         }\n\n         const fill_for_interactive = !this.isBatchMode() && this.fillatt.empty() && options.Hist && settings.Tooltip && !draw_markers && !show_line;\n         let h0 = height + 3;\n         if (!fill_for_interactive) {\n            const gry0 = Math.round(funcs.gry(0));\n            if (gry0 <= 0)\n               h0 = -3;\n            else if (gry0 < height)\n               h0 = gry0;\n         }\n         const close_path = `L${currx},${h0}H${startx}Z`;\n\n         if (draw_markers || show_line) {\n            if (path_fill) {\n               this.draw_g.append('svg:path')\n                        .attr('d', path_fill)\n                        .call(this.fillatt.func);\n            }\n\n            if (path_err) {\n               this.draw_g.append('svg:path')\n                     .attr('d', path_err)\n                     .call(this.lineatt.func);\n            }\n\n            if (hints_err) {\n               this.draw_g.append('svg:path')\n                     .attr('d', hints_err)\n                     .style('fill', 'none')\n                     .style('pointer-events', this.isBatchMode() ? null : 'visibleFill');\n            }\n\n            if (path_line) {\n               if (!this.fillatt.empty() && !options.Hist) {\n                  this.draw_g.append('svg:path')\n                        .attr('d', path_line + close_path)\n                        .call(this.fillatt.func);\n               }\n\n               this.draw_g.append('svg:path')\n                     .attr('d', path_line)\n                     .style('fill', 'none')\n                     .call(this.lineatt.func);\n            }\n\n            if (path_marker) {\n               this.draw_g.append('svg:path')\n                  .attr('d', path_marker)\n                  .call(this.markeratt.func);\n            }\n         } else if (res && options.Hist) {\n            this.draw_g.append('svg:path')\n                     .attr('d', res + ((!this.fillatt.empty() || fill_for_interactive) ? close_path : ''))\n                     .style('stroke-linejoin', 'miter')\n                     .call(this.lineatt.func)\n                     .call(this.fillatt.func);\n         }\n\n         return show_text ? this.finishTextDrawing() : true;\n      });\n   }\n\n   /** @summary Provide text information (tooltips) for histogram bin */\n   getBinTooltips(bin) {\n      const tips = [],\n            name = this.getObjectHint(),\n            pmain = this.getFramePainter(),\n            histo = this.getHisto(),\n            xaxis = this.getAxis('x'),\n            di = this.isDisplayItem() ? histo.stepx : 1,\n            x1 = xaxis.GetBinCoord(bin),\n            x2 = xaxis.GetBinCoord(bin+di),\n            xlbl = this.getAxisBinTip('x', bin, di);\n\n      let cont = histo.getBinContent(bin+1);\n\n      if (name) tips.push(name);\n\n      if (this.options.Error || this.options.Mark) {\n         tips.push(`x = ${xlbl}`, `y = ${pmain.axisAsText('y', cont)}`);\n         if (this.options.Error) {\n            if (xlbl[0] === '[') tips.push('error x = ' + ((x2 - x1) / 2).toPrecision(4));\n            tips.push('error y = ' + histo.getBinError(bin + 1).toPrecision(4));\n         }\n      } else {\n         tips.push(`bin = ${bin+1}`, `x = ${xlbl}`);\n         if (histo.$baseh) cont -= histo.$baseh.getBinContent(bin+1);\n         const lbl = 'entries = ' + (di > 1 ? '~' : '');\n         if (cont === Math.round(cont))\n            tips.push(lbl + cont);\n         else\n            tips.push(lbl + floatToString(cont, gStyle.fStatFormat));\n      }\n\n      return tips;\n   }\n\n   /** @summary Process tooltip event */\n   processTooltipEvent(pnt) {\n      let ttrect = this.draw_g?.selectChild('.tooltip_bin');\n\n      if (!pnt || !this.draw_content || this.options.Mode3D || !this.draw_g) {\n         ttrect?.remove();\n         return null;\n      }\n\n      const pmain = this.getFramePainter(),\n            funcs = pmain.getGrFuncs(this.options.second_x, this.options.second_y),\n            width = pmain.getFrameWidth(),\n            height = pmain.getFrameHeight(),\n            histo = this.getHisto(), xaxis = this.getAxis('x'),\n            left = this.getSelectIndex('x', 'left', -1),\n            right = this.getSelectIndex('x', 'right', 2);\n\n      let findbin = null, show_rect,\n          grx1, grx2, gry1, gry2, gapx = 2,\n          l = left, r = right;\n\n      function GetBinGrX(i) {\n         const xx = xaxis.GetBinCoord(i);\n         return (funcs.logx && (xx <= 0)) ? null : funcs.grx(xx);\n      }\n\n      function GetBinGrY(i) {\n         const yy = histo.getBinContent(i + 1);\n         if (funcs.logy && (yy < funcs.scale_ymin))\n            return funcs.swap_xy ? -1000 : 10*height;\n         return Math.round(funcs.gry(yy));\n      }\n\n      const pnt_x = funcs.swap_xy ? pnt.y : pnt.x,\n            pnt_y = funcs.swap_xy ? pnt.x : pnt.y;\n\n      while (l < r-1) {\n         const m = Math.round((l+r)*0.5),\n               xx = GetBinGrX(m);\n         if ((xx === null) || (xx < pnt_x - 0.5))\n            if (funcs.swap_xy) r = m; else l = m;\n          else if (xx > pnt_x + 0.5)\n            if (funcs.swap_xy) l = m; else r = m;\n          else { l++; r--; }\n      }\n\n      findbin = r = l;\n      grx1 = GetBinGrX(findbin);\n\n      if (funcs.swap_xy) {\n         while ((l > left) && (GetBinGrX(l-1) < grx1 + 2)) --l;\n         while ((r < right) && (GetBinGrX(r+1) > grx1 - 2)) ++r;\n      } else {\n         while ((l > left) && (GetBinGrX(l-1) > grx1 - 2)) --l;\n         while ((r < right) && (GetBinGrX(r+1) < grx1 + 2)) ++r;\n      }\n\n      if (l < r) {\n         // many points can be assigned with the same cursor position\n         // first try point around mouse y\n         let best = height;\n         for (let m = l; m <= r; m++) {\n            const dist = Math.abs(GetBinGrY(m) - pnt_y);\n            if (dist < best) { best = dist; findbin = m; }\n         }\n\n         // if best distance still too far from mouse position, just take from between\n         if (best > height/10)\n            findbin = Math.round(l + (r-l) / height * pnt_y);\n\n         grx1 = GetBinGrX(findbin);\n      }\n\n      grx1 = Math.round(grx1);\n      grx2 = Math.round(GetBinGrX(findbin+1));\n\n      if (this.options.Bar) {\n         const w = grx2 - grx1;\n         grx1 += Math.round(this.options.BarOffset*w);\n         grx2 = grx1 + Math.round(this.options.BarWidth*w);\n      }\n\n      if (grx1 > grx2)\n         [grx1, grx2] = [grx2, grx1];\n\n      if (this.isDisplayItem() && ((findbin <= histo.dx) || (findbin >= histo.dx + histo.nx))) {\n         // special case when zoomed out of scale and bin is not available\n         ttrect.remove();\n         return null;\n      }\n\n      const midx = Math.round((grx1 + grx2)/2),\n            midy = gry1 = gry2 = GetBinGrY(findbin);\n\n      if (this.options.Bar) {\n         show_rect = true;\n\n         gapx = 0;\n\n         gry1 = this.getBarBaseline(funcs, height);\n\n         if (gry1 > gry2)\n            [gry1, gry2] = [gry2, gry1];\n\n         if (!pnt.touch && (pnt.nproc === 1))\n            if ((pnt_y < gry1) || (pnt_y > gry2)) findbin = null;\n      } else if (this.options.Error || this.options.Mark) {\n         show_rect = true;\n\n         let msize = 3;\n         if (this.markeratt) msize = Math.max(msize, this.markeratt.getFullSize());\n\n         if (this.options.Error) {\n            const cont = histo.getBinContent(findbin+1),\n                  binerr = histo.getBinError(findbin+1);\n\n            gry1 = Math.round(funcs.gry(cont + binerr)); // up\n            gry2 = Math.round(funcs.gry(cont - binerr)); // down\n\n            const dx = (grx2-grx1)*this.options.errorX;\n            grx1 = Math.round(midx - dx);\n            grx2 = Math.round(midx + dx);\n         }\n\n         // show at least 6 pixels as tooltip rect\n         if (grx2 - grx1 < 2*msize) { grx1 = midx-msize; grx2 = midx+msize; }\n\n         gry1 = Math.min(gry1, midy - msize);\n         gry2 = Math.max(gry2, midy + msize);\n\n         if (!pnt.touch && (pnt.nproc === 1))\n            if ((pnt_y < gry1) || (pnt_y > gry2)) findbin = null;\n      } else if (this.options.Line)\n\n         show_rect = false;\n\n       else {\n         // if histogram alone, use old-style with rects\n         // if there are too many points at pixel, use circle\n         show_rect = (pnt.nproc === 1) && (right-left < width);\n\n         if (show_rect) {\n            gry2 = height;\n\n            if (!this.fillatt.empty()) {\n               gry2 = Math.min(height, Math.max(0, Math.round(funcs.gry(0))));\n               if (gry2 < gry1)\n                  [gry1, gry2] = [gry2, gry1];\n            }\n\n            // for mouse events pointer should be between y1 and y2\n            if (((pnt.y < gry1) || (pnt.y > gry2)) && !pnt.touch) findbin = null;\n         }\n      }\n\n      if (findbin !== null) {\n         // if bin on boundary found, check that x position is ok\n         if ((findbin === left) && (grx1 > pnt_x + gapx)) findbin = null; else\n         if ((findbin === right-1) && (grx2 < pnt_x - gapx)) findbin = null; else\n         // if bars option used check that bar is not match\n         if ((pnt_x < grx1 - gapx) || (pnt_x > grx2 + gapx)) findbin = null; else\n         // exclude empty bin if empty bins suppressed\n         if (!this.options.Zero && (histo.getBinContent(findbin+1) === 0)) findbin = null;\n      }\n\n      if ((findbin === null) || ((gry2 <= 0) || (gry1 >= height))) {\n         ttrect.remove();\n         return null;\n      }\n\n      const res = { name: 'histo', title: histo.fTitle,\n                  x: midx, y: midy, exact: true,\n                  color1: this.lineatt?.color ?? 'green',\n                  color2: this.fillatt?.getFillColorAlt('blue') ?? 'blue',\n                  lines: this.getBinTooltips(findbin) };\n\n      if (pnt.disabled) {\n         // case when tooltip should not highlight bin\n\n         ttrect.remove();\n         res.changed = true;\n      } else if (show_rect) {\n         if (ttrect.empty()) {\n            ttrect = this.draw_g.append('svg:rect')\n                                .attr('class', 'tooltip_bin')\n                                .style('pointer-events', 'none')\n                                .call(addHighlightStyle);\n         }\n\n         res.changed = ttrect.property('current_bin') !== findbin;\n\n         if (res.changed) {\n            ttrect.attr('x', pmain.swap_xy ? gry1 : grx1)\n                  .attr('width', pmain.swap_xy ? gry2-gry1 : grx2-grx1)\n                  .attr('y', pmain.swap_xy ? grx1 : gry1)\n                  .attr('height', pmain.swap_xy ? grx2-grx1 : gry2-gry1)\n                  .style('opacity', '0.3')\n                  .property('current_bin', findbin);\n         }\n\n         res.exact = (Math.abs(midy - pnt_y) <= 5) || ((pnt_y>=gry1) && (pnt_y<=gry2));\n\n         res.menu = res.exact; // one could show context menu\n         // distance to middle point, use to decide which menu to activate\n         res.menu_dist = Math.sqrt((midx-pnt_x)**2 + (midy-pnt_y)**2);\n      } else {\n         const radius = this.lineatt.width + 3;\n\n         if (ttrect.empty()) {\n            ttrect = this.draw_g.append('svg:circle')\n                                .attr('class', 'tooltip_bin')\n                                .style('pointer-events', 'none')\n                                .attr('r', radius)\n                                .call(this.lineatt.func)\n                                .call(this.fillatt.func);\n         }\n\n         res.exact = (Math.abs(midx - pnt.x) <= radius) && (Math.abs(midy - pnt.y) <= radius);\n\n         res.menu = res.exact; // show menu only when mouse pointer exactly over the histogram\n         res.menu_dist = Math.sqrt((midx-pnt.x)**2 + (midy-pnt.y)**2);\n\n         res.changed = ttrect.property('current_bin') !== findbin;\n\n         if (res.changed) {\n            ttrect.attr('cx', midx)\n                  .attr('cy', midy)\n                  .property('current_bin', findbin);\n         }\n      }\n\n      if (res.changed) {\n         res.user_info = { obj: histo, name: 'histo',\n                           bin: findbin, cont: histo.getBinContent(findbin+1),\n                           grx: midx, gry: midy };\n      }\n\n      return res;\n   }\n\n   /** @summary Fill histogram context menu */\n   fillHistContextMenu(menu) {\n      menu.add('Auto zoom-in', () => this.autoZoom());\n\n      const opts = this.getSupportedDrawOptions();\n\n      menu.addDrawMenu('Draw with', opts, arg => {\n         if (arg.indexOf(kInspect) === 0)\n            return this.showInspector(arg);\n\n         this.decodeOptions(arg); // obsolete, should be implemented differently\n\n         if (this.options.need_fillcol && this.fillatt?.empty())\n            this.fillatt.change(5, 1001);\n\n         // redraw all objects\n         this.interactiveRedraw('pad', 'drawopt');\n      });\n   }\n\n   /** @summary Perform automatic zoom inside non-zero region of histogram */\n   autoZoom() {\n      let left = this.getSelectIndex('x', 'left', -1),\n          right = this.getSelectIndex('x', 'right', 1);\n      const dist = right - left, histo = this.getHisto(), xaxis = this.getAxis('x');\n\n      if (dist === 0) return;\n\n      // first find minimum\n      let min = histo.getBinContent(left + 1);\n      for (let indx = left; indx < right; ++indx)\n         min = Math.min(min, histo.getBinContent(indx+1));\n      if (min > 0) return; // if all points positive, no chance for auto-scale\n\n      while ((left < right) && (histo.getBinContent(left+1) <= min)) ++left;\n      while ((left < right) && (histo.getBinContent(right) <= min)) --right;\n\n      // if singular bin\n      if ((left === right-1) && (left > 2) && (right < this.nbinsx-2)) {\n         --left; ++right;\n      }\n\n      if ((right - left < dist) && (left < right))\n         return this.getFramePainter().zoom(xaxis.GetBinCoord(left), xaxis.GetBinCoord(right));\n   }\n\n   /** @summary Checks if it makes sense to zoom inside specified axis range */\n   canZoomInside(axis, min, max) {\n      const xaxis = this.getAxis('x');\n\n      if ((axis === 'x') && (xaxis.FindBin(max, 0.5) - xaxis.FindBin(min, 0) > 1)) return true;\n\n      if ((axis === 'y') && (Math.abs(max-min) > Math.abs(this.ymax-this.ymin)*1e-6)) return true;\n\n      return false;\n   }\n\n   /** @summary Call appropriate draw function */\n   async callDrawFunc(reason) {\n      const main = this.getFramePainter();\n\n      if (main && (main.mode3d !== this.options.Mode3D) && !this.isMainPainter())\n         this.options.Mode3D = main.mode3d;\n\n      return this.options.Mode3D ? this.draw3D(reason) : this.draw2D(reason);\n   }\n\n   /** @summary Draw in 2d */\n   async draw2D(reason) {\n      this.clear3DScene();\n\n      return this.drawFrameAxes().then(res => {\n         return res ? this.drawingBins(reason) : false;\n      }).then(res => {\n         if (res)\n            return this.draw1DBins().then(() => this.addInteractivity());\n      }).then(() => this);\n   }\n\n   /** @summary Draw in 3d */\n   async draw3D(reason) {\n      console.log('3D drawing is disabled, load ./hist/RH1Painter.mjs');\n      return this.draw2D(reason);\n   }\n\n   /** @summary Redraw histogram */\n   async redraw(reason) {\n      return this.callDrawFunc(reason);\n   }\n\n   static async _draw(painter, opt) {\n      return ensureRCanvas(painter).then(() => {\n         painter.setAsMainPainter();\n\n         painter.options = { Hist: false, Bar: false, BarStyle: 0,\n                             Error: false, ErrorKind: -1, errorX: gStyle.fErrorX,\n                             Zero: false, Mark: false,\n                             Line: false, Fill: false, Lego: 0, Surf: 0,\n                             Text: false, TextAngle: 0, TextKind: '', AutoColor: 0,\n                             BarOffset: 0, BarWidth: 1, BaseLine: false,\n                             Mode3D: false, FrontBox: false, BackBox: false };\n\n         const d = new DrawOptions(opt);\n         if (d.check('R3D_', true))\n            painter.options.Render3D = constants.Render3D.fromString(d.part.toLowerCase());\n\n         const kind = painter.v7EvalAttr('kind', 'hist'),\n             sub = painter.v7EvalAttr('sub', 0),\n             has_main = !!painter.getMainPainter(),\n             o = painter.options;\n\n         o.Text = painter.v7EvalAttr('drawtext', false);\n         o.BarOffset = painter.v7EvalAttr('baroffset', 0.0);\n         o.BarWidth = painter.v7EvalAttr('barwidth', 1.0);\n         o.second_x = has_main && painter.v7EvalAttr('secondx', false);\n         o.second_y = has_main && painter.v7EvalAttr('secondy', false);\n\n         switch (kind) {\n            case 'bar': o.Bar = true; o.BarStyle = sub; break;\n            case 'err': o.Error = true; o.ErrorKind = sub; break;\n            case 'p': o.Mark = true; break;\n            case 'l': o.Line = true; break;\n            case 'lego': o.Lego = sub > 0 ? 10+sub : 12; o.Mode3D = true; break;\n            default: o.Hist = true;\n         }\n\n         painter.scanContent();\n\n         return painter.callDrawFunc();\n      });\n   }\n\n   /** @summary draw RH1 object */\n   static async draw(dom, histo, opt) {\n      return RH1Painter._draw(new RH1Painter(dom, histo), opt);\n   }\n\n} // class RH1Painter\n\nexport { RH1Painter };\n","import { settings, gStyle } from '../core.mjs';\nimport { RH1Painter as RH1Painter2D } from '../hist2d/RH1Painter.mjs';\nimport { RAxisPainter } from '../gpad/RAxisPainter.mjs';\nimport { assignFrame3DMethods, drawBinsLego } from './hist3d.mjs';\n\n\nclass RH1Painter extends RH1Painter2D {\n\n   /** @summary Draw 1-D histogram in 3D mode */\n   draw3D(reason) {\n      this.mode3d = true;\n\n      const main = this.getFramePainter(), // who makes axis drawing\n            is_main = this.isMainPainter(), // is main histogram\n            zmult = 1 + 2*gStyle.fHistTopMargin;\n      let pr = Promise.resolve(this);\n\n      if (reason === 'resize') {\n         if (is_main && main.resize3D()) main.render3D();\n         return pr;\n      }\n\n      this.deleteAttr();\n\n      this.scanContent(true); // may be required for axis drawings\n\n      if (is_main) {\n         assignFrame3DMethods(main);\n         pr = main.create3DScene(this.options.Render3D).then(() => {\n            main.setAxesRanges(this.getAxis('x'), this.xmin, this.xmax, null, this.ymin, this.ymax, null, 0, 0);\n            main.set3DOptions(this.options);\n            main.drawXYZ(main.toplevel, RAxisPainter, { use_y_for_z: true, zmult, zoom: settings.Zooming, ndim: 1, draw: true, v7: true });\n         });\n      }\n\n      if (!main.mode3d)\n         return pr;\n\n      return pr.then(() => this.drawingBins(reason)).then(() => {\n         // called when bins received from server, must be reentrant\n         const main = this.getFramePainter();\n\n         drawBinsLego(this, true);\n         this.updatePaletteDraw();\n         main.render3D();\n         main.addKeysHandler();\n         return this;\n      });\n   }\n\n      /** @summary draw RH1 object */\n   static async draw(dom, histo, opt) {\n      return RH1Painter._draw(new RH1Painter(dom, histo), opt);\n   }\n\n} // class RH1Painter\n\nexport { RH1Painter };\n"],"x_google_ignoreList":[0,1]}