"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[471],{7471:(B,P,d)=>{d.r(P),d.d(P,{TWebPaintingPainter:()=>_});var S=d(263),m=d(2454);class _ extends m.tK{updateObject(t){return!!this.matchObjectType(t)&&(this.assignObject(t),!0)}redraw(){const t=this.getObject(),r=this.getAxisToSvgFunc();if(!t?.fOper||!r)return;let u,T,i,a=0,s={},x=null,b="none",p="",l=t.fOper.split(";");const c=e=>{if(e!=b&&(x&&(x.attr("d",p),p="",x=null,b="none"),e))switch(b=e,x=this.draw_g.append("svg:path"),e){case"f":x.call(this.fillatt.func);break;case"l":x.call(this.lineatt.func).style("fill","none");break;case"m":x.call(this.markeratt.func)}},y=(e,h)=>{let n=0,f={_typename:"any"};for(let o=0;o<h.length;++o){let g=e.indexOf(":",n+1);f[h[o]]=parseInt(e.slice(n+1,g>n?g:void 0)),n=g}return f},w=e=>{for(;++e<l.length;)switch(u=l[e][0],u){case"z":this.createAttLine({attr:y(l[e],["fLineColor","fLineStyle","fLineWidth"]),force:!0}),c();continue;case"y":this.createAttFill({attr:y(l[e],["fFillColor","fFillStyle"]),force:!0}),c();continue;case"x":this.createAttMarker({attr:y(l[e],["fMarkerColor","fMarkerStyle","fMarkerSize"]),force:!0}),c();continue;case"o":s=y(l[e],["fTextColor","fTextFont","fTextSize","fTextAlign","fTextAngle"]),s.fTextSize<0&&(s.fTextSize*=-.001),c();continue;case"r":case"b":{c("b"==u?"f":"l");let h=r.x(t.fBuf[a++]),n=r.y(t.fBuf[a++]),f=r.x(t.fBuf[a++]),o=r.y(t.fBuf[a++]);p+=`M${h},${n}h${f-h}v${o-n}h${h-f}z`;continue}case"l":case"f":for(c(u),T=parseInt(l[e].slice(1)),i=0;i<T;++i)p+=(i>0?"L":"M")+r.x(t.fBuf[a++])+","+r.y(t.fBuf[a++]);"f"==u&&(p+="Z");continue;case"m":for(c(u),T=parseInt(l[e].slice(1)),this.markeratt.resetPos(),i=0;i<T;++i)p+=this.markeratt.create(r.x(t.fBuf[a++]),r.y(t.fBuf[a++]));continue;case"h":case"t":if(s.fTextSize){c();let h=s.fTextSize>1?s.fTextSize:this.getPadPainter().getPadHeight()*s.fTextSize,n=s.fTextAngle,f=l[e].slice(1),o=this.draw_g.append("svg:g");if(n>=360&&(n-=360*Math.floor(n/360)),this.startTextDrawing(s.fTextFont,h,o),"h"==u){let g="";for(i=0;i<f.length;i+=2)g+=String.fromCharCode(parseInt(f.slice(i,i+2),16));f=g}return this.drawText({align:s.fTextAlign,x:r.x(t.fBuf[a++]),y:r.y(t.fBuf[a++]),rotate:-n,text:f,color:(0,S.Lq)(s.fTextColor),latex:0,draw_g:o}),this.finishTextDrawing(o).then(()=>w(e))}continue;default:console.log("unsupported operation "+u)}return Promise.resolve(!0)};return this.createG(),w(-1).then(()=>(c(),this))}static draw(t,r){let a=new _(t,r);return a.addToPadPrimitives(),a.redraw()}}}}]);
//# sourceMappingURL=471.4e242ff76afb8152.js.map