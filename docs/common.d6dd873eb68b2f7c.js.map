{"version":3,"file":"common.d6dd873eb68b2f7c.js","mappings":"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","names":["kLineNDC","BIT","TLinePainter","ObjectPainter","moveStart","x","y","fullsize","Math","sqrt","this","x1","x2","y1","y2","sz1","sz2","side","moveDrag","dx","dy","draw_g","select","attr","createPath","moveEnd","not_changed","line","getObject","exec","fx1","svgToAxis","isndc","fx2","fy1","fy2","swap_xy","fX1","fX2","fY1","fY2","submitCanvExec","getUserRanges","TestBit","minx","min","maxx","max","miny","maxy","prepareDraw","use_frame","DrawOptions","getDrawOpt","check","createG","undefined","getFramePainter","func","getAxisToSvgFunc","createAttLine","round","addExtras","redraw","elem","append","call","lineatt","$do_not_draw","remove","addMoveHandler","assignContextMenu","kToFront","draw","dom","obj","opt","_asyncToGenerator","painter","ensureTCanvas","then","drawPolyMarker3D","_drawPolyMarker3D","apply","arguments","fp","$fp","isObject","grx","gry","grz","poly","fP","step","numselect","i","length","scale_xmin","scale_xmax","scale_ymin","scale_ymax","scale_zmin","scale_zmax","settings","OptimizeDraw","floor","size","pnts","PointsCreator","webgl","size_x3d","index","Int32Array","icnt","addPoint","createPoints","color","getColor","fMarkerColor","style","fMarkerStyle","mesh","tip_color","tip_name","fName","scale0","scale","add3DMesh","tooltip","intersect","indx","nvertex","z1","z2","lines","axisAsText","render3D","produceTAxisLogScale","axis","num","lmin","lmax","log","fNbins","fXbins","Array","exp","fXmin","fXmax","scanTF1Options","isStr","p","indexOf","webcanv_hist","use_saved","slice","TF1Painter","TH1Painter","getObjectName","$func","getClassName","_typename","clTF1","isTF1","getPrimaryObject","updateObject","evalPar","histo","getHisto","h0","getPadPainter","findInPrimitives","clTH1D","updateAxes","createTF1Histogram","scanContent","reason","_use_saved_points","super","tf1","hist","pad","getRootPad","logx","fLogx","gr","getGrFuncs","second_x","second_y","xmin","xmax","np","fNpx","zoom_xmin","zoom_xmax","fSave","PreferSavedPoints","ensureBins","fNcells","fArray","Float32Array","fill","fXaxis","_fail_eval","iserror","proivdeEvalPar","n","GetBinCenter","setBinContent","Number","isFinite","custom_xaxis","mp","getMainPainter","isFunc","Object","assign","_getTF1Save","setHistogramTitle","fTitle","fMinimum","fMaximum","fLineColor","fLineStyle","fLineWidth","fFillColor","fFillStyle","fMarkerSize","fBits","kNoStats","extractAxesProperties","ndim","nsave","canZoomInside","nb_points","abs","getTF1Tooltips","pnt","$tmp_tooltip","getObjectHint","funcs","options","push","revertAxis","floatToString","gStyle","fStatFormat","processTooltipEvent","ttrect","selectChild","res","name","title","color1","color2","fillatt","getFillColorAlt","exact","menu","disabled","empty","width","fillWebObjectOptions","fcust","web","createHistogram","getElementMainPainter","THistPainter","_drawHist","TGraphPainter","TGraphPainter2D","drawBins3D","graph","mode3d","toplevel","console","pos3d","createGraphDrawAttributes","drawbins","optimizeBins","first","last","zoom_ymin","zoom_ymax","p0","p1","createLineSegments","create3DLineMaterial","drawAxisHisto","_this","getDrawDom","Axis","_drawGraph"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["../node_modules/jsroot/modules/draw/TLinePainter.mjs","../node_modules/jsroot/modules/draw/TPolyMarker3D.mjs","../node_modules/jsroot/modules/hist/TF1Painter.mjs","../node_modules/jsroot/modules/hist/TGraphPainter.mjs"],"sourcesContent":["import { BIT } from '../core.mjs';\nimport { DrawOptions } from '../base/BasePainter.mjs';\nimport { ObjectPainter } from '../base/ObjectPainter.mjs';\nimport { ensureTCanvas } from '../gpad/TCanvasPainter.mjs';\nimport { addMoveHandler } from '../gui/utils.mjs';\nimport { assignContextMenu, kToFront } from '../gui/menu.mjs';\n\n\nconst kLineNDC = BIT(14);\n\nclass TLinePainter extends ObjectPainter {\n\n   /** @summary Start interactive moving */\n   moveStart(x, y) {\n      const fullsize = Math.sqrt((this.x1-this.x2)**2 + (this.y1-this.y2)**2),\n          sz1 = Math.sqrt((x-this.x1)**2 + (y-this.y1)**2)/fullsize,\n          sz2 = Math.sqrt((x-this.x2)**2 + (y-this.y2)**2)/fullsize;\n      if (sz1 > 0.9)\n         this.side = 1;\n      else if (sz2 > 0.9)\n         this.side = -1;\n      else\n         this.side = 0;\n   }\n\n   /** @summary Continue interactive moving */\n   moveDrag(dx, dy) {\n      if (this.side !== 1) { this.x1 += dx; this.y1 += dy; }\n      if (this.side !== -1) { this.x2 += dx; this.y2 += dy; }\n      this.draw_g.select('path').attr('d', this.createPath());\n   }\n\n   /** @summary Finish interactive moving */\n   moveEnd(not_changed) {\n      if (not_changed) return;\n      const line = this.getObject();\n      let exec = '',\n          fx1 = this.svgToAxis('x', this.x1, this.isndc),\n          fx2 = this.svgToAxis('x', this.x2, this.isndc),\n          fy1 = this.svgToAxis('y', this.y1, this.isndc),\n          fy2 = this.svgToAxis('y', this.y2, this.isndc);\n      if (this.swap_xy)\n         [fx1, fy1, fx2, fy2] = [fy1, fx1, fy2, fx2];\n      line.fX1 = fx1;\n      line.fX2 = fx2;\n      line.fY1 = fy1;\n      line.fY2 = fy2;\n      if (this.side !== 1) exec += `SetX1(${fx1});;SetY1(${fy1});;`;\n      if (this.side !== -1) exec += `SetX2(${fx2});;SetY2(${fy2});;`;\n      this.submitCanvExec(exec + 'Notify();;');\n   }\n\n   /** @summary Returns object ranges\n     * @desc Can be used for newly created canvas */\n   getUserRanges() {\n      const line = this.getObject(),\n            isndc = line.TestBit(kLineNDC);\n      if (isndc)\n         return null;\n      const minx = Math.min(line.fX1, line.fX2),\n            maxx = Math.max(line.fX1, line.fX2),\n            miny = Math.min(line.fY1, line.fY2),\n            maxy = Math.max(line.fY1, line.fY2);\n      return { minx, miny, maxx, maxy };\n   }\n\n   /** @summary Calculate line coordinates */\n   prepareDraw() {\n      const line = this.getObject();\n\n      this.isndc = line.TestBit(kLineNDC);\n\n      const use_frame = this.isndc ? false : new DrawOptions(this.getDrawOpt()).check('FRAME');\n\n      this.createG(use_frame ? 'frame2d' : undefined);\n\n      this.swap_xy = use_frame && this.getFramePainter()?.swap_xy;\n\n      const func = this.getAxisToSvgFunc(this.isndc, true);\n\n      this.x1 = func.x(line.fX1);\n      this.y1 = func.y(line.fY1);\n      this.x2 = func.x(line.fX2);\n      this.y2 = func.y(line.fY2);\n\n      if (this.swap_xy)\n         [this.x1, this.y1, this.x2, this.y2] = [this.y1, this.x1, this.y2, this.x2];\n\n      this.createAttLine({ attr: line });\n   }\n\n   /** @summary Create path */\n   createPath() {\n      const x1 = Math.round(this.x1), x2 = Math.round(this.x2), y1 = Math.round(this.y1), y2 = Math.round(this.y2);\n      return `M${x1},${y1}` + (x1 === x2 ? `V${y2}` : (y1 === y2 ? `H${x2}` : `L${x2},${y2}`));\n   }\n\n   /** @summary Add extras - used for TArrow */\n   addExtras() {}\n\n   /** @summary Redraw line */\n   redraw() {\n      this.prepareDraw();\n\n      const elem = this.draw_g.append('svg:path')\n                       .attr('d', this.createPath())\n                       .call(this.lineatt.func);\n\n      if (this.getObject()?.$do_not_draw)\n         elem.remove();\n      else {\n         this.addExtras(elem);\n         addMoveHandler(this);\n         assignContextMenu(this, kToFront);\n      }\n\n      return this;\n   }\n\n   /** @summary Draw TLine object */\n   static async draw(dom, obj, opt) {\n      const painter = new TLinePainter(dom, obj, opt);\n      return ensureTCanvas(painter, false).then(() => painter.redraw());\n   }\n\n} // class TLinePainter\n\n\nexport { TLinePainter };\n","import { settings, isObject } from '../core.mjs';\nimport { PointsCreator } from '../base/base3d.mjs';\n\n/** @summary direct draw function for TPolyMarker3D object\n  * @private */\nasync function drawPolyMarker3D() {\n   const fp = this.$fp || this.getFramePainter();\n\n   delete this.$fp;\n\n   if (!isObject(fp) || !fp.grx || !fp.gry || !fp.grz)\n      return this;\n\n   const poly = this.getObject(), sizelimit = 50000, fP = poly.fP;\n   let step = 1, numselect = 0;\n\n   for (let i = 0; i < fP.length; i += 3) {\n      if ((fP[i] < fp.scale_xmin) || (fP[i] > fp.scale_xmax) ||\n          (fP[i+1] < fp.scale_ymin) || (fP[i+1] > fp.scale_ymax) ||\n          (fP[i+2] < fp.scale_zmin) || (fP[i+2] > fp.scale_zmax)) continue;\n      ++numselect;\n   }\n\n   if ((settings.OptimizeDraw > 0) && (numselect > sizelimit)) {\n      step = Math.floor(numselect/sizelimit);\n      if (step <= 2) step = 2;\n   }\n\n   const size = Math.floor(numselect/step),\n         pnts = new PointsCreator(size, fp.webgl, fp.size_x3d/100),\n         index = new Int32Array(size);\n   let select = 0, icnt = 0;\n\n   for (let i = 0; i < fP.length; i += 3) {\n      if ((fP[i] < fp.scale_xmin) || (fP[i] > fp.scale_xmax) ||\n          (fP[i+1] < fp.scale_ymin) || (fP[i+1] > fp.scale_ymax) ||\n          (fP[i+2] < fp.scale_zmin) || (fP[i+2] > fp.scale_zmax)) continue;\n\n      if (step > 1) {\n         select = (select+1) % step;\n         if (select !== 0) continue;\n      }\n\n      index[icnt++] = i;\n\n      pnts.addPoint(fp.grx(fP[i]), fp.gry(fP[i+1]), fp.grz(fP[i+2]));\n   }\n\n   return pnts.createPoints({ color: this.getColor(poly.fMarkerColor), style: poly.fMarkerStyle }).then(mesh => {\n      mesh.tip_color = (poly.fMarkerColor === 3) ? 0xFF0000 : 0x00FF00;\n      mesh.tip_name = poly.fName || 'Poly3D';\n      mesh.poly = poly;\n      mesh.fp = fp;\n      mesh.scale0 = 0.7*pnts.scale;\n      mesh.index = index;\n\n      fp.add3DMesh(mesh, this, true);\n\n      mesh.tooltip = function(intersect) {\n         let indx = Math.floor(intersect.index / this.nvertex);\n         if ((indx < 0) || (indx >= this.index.length)) return null;\n\n         indx = this.index[indx];\n\n         const fp = this.fp,\n               grx = fp.grx(this.poly.fP[indx]),\n               gry = fp.gry(this.poly.fP[indx+1]),\n               grz = fp.grz(this.poly.fP[indx+2]);\n\n         return {\n            x1: grx - this.scale0,\n            x2: grx + this.scale0,\n            y1: gry - this.scale0,\n            y2: gry + this.scale0,\n            z1: grz - this.scale0,\n            z2: grz + this.scale0,\n            color: this.tip_color,\n            lines: [this.tip_name,\n                     'pnt: ' + indx/3,\n                     'x: ' + fp.axisAsText('x', this.poly.fP[indx]),\n                     'y: ' + fp.axisAsText('y', this.poly.fP[indx+1]),\n                     'z: ' + fp.axisAsText('z', this.poly.fP[indx+2])\n                   ]\n         };\n      };\n\n      fp.render3D(100); // set timeout to be able draw other points\n\n      return this;\n   });\n}\n\nexport { drawPolyMarker3D };\n","import { settings, gStyle, isStr, isFunc, clTH1D, createHistogram, setHistogramTitle, clTF1, kNoStats } from '../core.mjs';\nimport { floatToString } from '../base/BasePainter.mjs';\nimport { getElementMainPainter, ObjectPainter } from '../base/ObjectPainter.mjs';\nimport { THistPainter } from '../hist2d/THistPainter.mjs';\nimport { TH1Painter } from '../hist2d/TH1Painter.mjs';\nimport { proivdeEvalPar, _getTF1Save } from '../base/func.mjs';\n\n\n/** @summary Create log scale for axis bins\n  * @private */\nfunction produceTAxisLogScale(axis, num, min, max) {\n   let lmin, lmax;\n\n   if (max > 0) {\n      lmax = Math.log(max);\n      lmin = min > 0 ? Math.log(min) : lmax - 5;\n   } else {\n      lmax = -10;\n      lmin = -15;\n   }\n\n   axis.fNbins = num;\n   axis.fXbins = new Array(num + 1);\n   for (let i = 0; i <= num; ++i)\n      axis.fXbins[i] = Math.exp(lmin + i / num * (lmax - lmin));\n   axis.fXmin = Math.exp(lmin);\n   axis.fXmax = Math.exp(lmax);\n}\n\nfunction scanTF1Options(opt) {\n   if (!isStr(opt)) opt = '';\n   let p = opt.indexOf(';webcanv_hist'), webcanv_hist = false, use_saved = 0;\n   if (p >= 0) {\n      webcanv_hist = true;\n      opt = opt.slice(0, p);\n   }\n   p = opt.indexOf(';force_saved');\n   if (p >= 0) {\n      use_saved = 2;\n      opt = opt.slice(0, p);\n   }\n   p = opt.indexOf(';prefer_saved');\n   if (p >= 0) {\n      use_saved = 1;\n      opt = opt.slice(0, p);\n   }\n   return { opt, webcanv_hist, use_saved };\n}\n\n\n/**\n  * @summary Painter for TF1 object\n  *\n  * @private\n  */\n\nclass TF1Painter extends TH1Painter {\n\n   /** @summary Returns drawn object name */\n   getObjectName() { return this.$func?.fName ?? 'func'; }\n\n   /** @summary Returns drawn object class name */\n   getClassName() { return this.$func?._typename ?? clTF1; }\n\n   /** @summary Returns true while function is drawn */\n   isTF1() { return true; }\n\n   /** @summary Returns primary function which was then drawn as histogram */\n   getPrimaryObject() { return this.$func; }\n\n   /** @summary Update function */\n   updateObject(obj /* , opt */) {\n      if (!obj || (this.getClassName() !== obj._typename)) return false;\n      delete obj.evalPar;\n      const histo = this.getHisto();\n\n      if (this.webcanv_hist) {\n         const h0 = this.getPadPainter()?.findInPrimitives('Func', clTH1D);\n         if (h0) this.updateAxes(histo, h0, this.getFramePainter());\n      }\n\n      this.$func = obj;\n      this.createTF1Histogram(obj, histo);\n      this.scanContent();\n      return true;\n   }\n\n   /** @summary Redraw TF1\n     * @private */\n   redraw(reason) {\n      if (!this._use_saved_points && (reason === 'logx' || reason === 'zoom')) {\n         this.createTF1Histogram(this.$func, this.getHisto());\n         this.scanContent();\n      }\n\n      return super.redraw(reason);\n   }\n\n   /** @summary Create histogram for TF1 drawing\n     * @private */\n   createTF1Histogram(tf1, hist) {\n      const fp = this.getFramePainter(),\n            pad = this.getPadPainter()?.getRootPad(true),\n            logx = pad?.fLogx,\n            gr = fp?.getGrFuncs(this.second_x, this.second_y);\n      let xmin = tf1.fXmin, xmax = tf1.fXmax, np = Math.max(tf1.fNpx, 100);\n\n      if (gr?.zoom_xmin !== gr?.zoom_xmax) {\n         const dx = (xmax - xmin) / np;\n         if ((xmin < gr.zoom_xmin) && (gr.zoom_xmin < xmax))\n            xmin = Math.max(xmin, gr.zoom_xmin - dx);\n         if ((xmin < gr.zoom_xmax) && (gr.zoom_xmax < xmax))\n            xmax = Math.min(xmax, gr.zoom_xmax + dx);\n      }\n\n      this._use_saved_points = (tf1.fSave.length > 3) && (settings.PreferSavedPoints || (this.use_saved > 1));\n\n      const ensureBins = num => {\n         if (hist.fNcells !== num + 2) {\n            hist.fNcells = num + 2;\n            hist.fArray = new Float32Array(hist.fNcells);\n         }\n         hist.fArray.fill(0);\n         hist.fXaxis.fNbins = num;\n         hist.fXaxis.fXbins = [];\n      };\n\n      delete this._fail_eval;\n\n      // this._use_saved_points = true;\n\n      if (!this._use_saved_points) {\n         let iserror = false;\n\n         if (!tf1.evalPar) {\n            try {\n               if (!proivdeEvalPar(tf1))\n                  iserror = true;\n            } catch {\n               iserror = true;\n            }\n         }\n\n         ensureBins(np);\n\n         if (logx)\n            produceTAxisLogScale(hist.fXaxis, np, xmin, xmax);\n          else {\n            hist.fXaxis.fXmin = xmin;\n            hist.fXaxis.fXmax = xmax;\n         }\n\n         for (let n = 0; (n < np) && !iserror; n++) {\n            const x = hist.fXaxis.GetBinCenter(n + 1);\n            let y = 0;\n            try {\n               y = tf1.evalPar(x);\n            } catch (err) {\n               iserror = true;\n            }\n\n            if (!iserror)\n               hist.setBinContent(n + 1, Number.isFinite(y) ? y : 0);\n         }\n\n         if (iserror)\n            this._fail_eval = true;\n\n         if (iserror && (tf1.fSave.length > 3))\n            this._use_saved_points = true;\n      }\n\n      // in the case there were points have saved and we cannot calculate function\n      // if we don't have the user's function\n      if (this._use_saved_points) {\n         np = tf1.fSave.length - 3;\n         let custom_xaxis = null;\n         xmin = tf1.fSave[np + 1];\n         xmax = tf1.fSave[np + 2];\n\n         if (xmin === xmax) {\n            const mp = this.getMainPainter();\n            if (isFunc(mp?.getHisto))\n               custom_xaxis = mp?.getHisto()?.fXaxis;\n         }\n\n         if (custom_xaxis) {\n            ensureBins(hist.fXaxis.fNbins);\n            Object.assign(hist.fXaxis, custom_xaxis);\n            // TODO: find first bin\n\n            for (let n = 0; n < np; ++n) {\n               const y = tf1.fSave[n];\n               hist.setBinContent(n + 1, Number.isFinite(y) ? y : 0);\n            }\n         } else {\n            ensureBins(tf1.fNpx);\n            hist.fXaxis.fXmin = tf1.fXmin;\n            hist.fXaxis.fXmax = tf1.fXmax;\n\n            for (let n = 0; n < tf1.fNpx; ++n) {\n               const y = _getTF1Save(tf1, hist.fXaxis.GetBinCenter(n + 1));\n               hist.setBinContent(n + 1, Number.isFinite(y) ? y : 0);\n            }\n         }\n      }\n\n      hist.fName = 'Func';\n      setHistogramTitle(hist, tf1.fTitle);\n      hist.fMinimum = tf1.fMinimum;\n      hist.fMaximum = tf1.fMaximum;\n      hist.fLineColor = tf1.fLineColor;\n      hist.fLineStyle = tf1.fLineStyle;\n      hist.fLineWidth = tf1.fLineWidth;\n      hist.fFillColor = tf1.fFillColor;\n      hist.fFillStyle = tf1.fFillStyle;\n      hist.fMarkerColor = tf1.fMarkerColor;\n      hist.fMarkerStyle = tf1.fMarkerStyle;\n      hist.fMarkerSize = tf1.fMarkerSize;\n      hist.fBits |= kNoStats;\n   }\n\n   /** @summary Extract function ranges */\n   extractAxesProperties(ndim) {\n      super.extractAxesProperties(ndim);\n\n      const func = this.$func, nsave = func?.fSave.length ?? 0;\n\n      if (nsave > 3 && this._use_saved_points) {\n         this.xmin = Math.min(this.xmin, func.fSave[nsave - 2]);\n         this.xmax = Math.max(this.xmax, func.fSave[nsave - 1]);\n      }\n      if (func) {\n         this.xmin = Math.min(this.xmin, func.fXmin);\n         this.xmax = Math.max(this.xmax, func.fXmax);\n      }\n   }\n\n   /** @summary Checks if it makes sense to zoom inside specified axis range */\n   canZoomInside(axis, min, max) {\n      const nsave = this.$func?.fSave.length ?? 0;\n      if ((nsave > 3) && this._use_saved_points && (axis === 'x')) {\n         // in the case where the points have been saved, useful for example\n         // if we don't have the user's function\n         const nb_points = nsave - 2,\n             xmin = this.$func.fSave[nsave - 2],\n             xmax = this.$func.fSave[nsave - 1];\n\n         return Math.abs(xmax - xmin) / nb_points < Math.abs(max - min);\n      }\n\n      // if function calculated, one always could zoom inside\n      return (axis === 'x') || (axis === 'y');\n   }\n\n      /** @summary return tooltips for TF2 */\n   getTF1Tooltips(pnt) {\n      delete this.$tmp_tooltip;\n      const lines = [this.getObjectHint()],\n            funcs = this.getFramePainter()?.getGrFuncs(this.options.second_x, this.options.second_y);\n\n      if (!funcs || !isFunc(this.$func?.evalPar)) {\n         lines.push('grx = ' + pnt.x, 'gry = ' + pnt.y);\n         return lines;\n      }\n\n      const x = funcs.revertAxis('x', pnt.x);\n      let y = 0, gry = 0, iserror = false;\n\n       try {\n          y = this.$func.evalPar(x);\n          gry = Math.round(funcs.gry(y));\n       } catch {\n          iserror = true;\n       }\n\n      lines.push('x = ' + funcs.axisAsText('x', x),\n                 'value = ' + (iserror ? '<fail>' : floatToString(y, gStyle.fStatFormat)));\n\n      if (!iserror)\n         this.$tmp_tooltip = { y, gry };\n      return lines;\n   }\n\n   /** @summary process tooltip event for TF1 object */\n   processTooltipEvent(pnt) {\n      if (this._use_saved_points)\n         return super.processTooltipEvent(pnt);\n\n      let ttrect = this.draw_g?.selectChild('.tooltip_bin');\n\n      if (!this.draw_g || !pnt) {\n         ttrect?.remove();\n         return null;\n      }\n\n      const res = { name: this.$func?.fName, title: this.$func?.fTitle,\n                    x: pnt.x, y: pnt.y,\n                    color1: this.lineatt?.color ?? 'green',\n                    color2: this.fillatt?.getFillColorAlt('blue') ?? 'blue',\n                    lines: this.getTF1Tooltips(pnt), exact: true, menu: true };\n\n      if (pnt.disabled)\n         ttrect.remove();\n      else {\n         if (ttrect.empty()) {\n            ttrect = this.draw_g.append('svg:circle')\n                             .attr('class', 'tooltip_bin')\n                             .style('pointer-events', 'none')\n                             .style('fill', 'none')\n                             .attr('r', (this.lineatt?.width ?? 1) + 4);\n         }\n\n         ttrect.attr('cx', pnt.x)\n               .attr('cy', this.$tmp_tooltip.gry ?? pnt.y);\n         if (this.lineatt)\n            ttrect.call(this.lineatt.func);\n      }\n\n      return res;\n   }\n\n   /** @summary fill information for TWebCanvas\n    * @desc Used to inform web canvas when evaluation failed\n     * @private */\n   fillWebObjectOptions(opt) {\n      opt.fcust = this._fail_eval && !this.use_saved ? 'func_fail' : '';\n   }\n\n   /** @summary draw TF1 object */\n   static async draw(dom, tf1, opt) {\n      const web = scanTF1Options(opt);\n      opt = web.opt;\n      delete web.opt;\n      let hist;\n\n      if (web.webcanv_hist) {\n         const dummy = new ObjectPainter(dom);\n         hist = dummy.getPadPainter()?.findInPrimitives('Func', clTH1D);\n      }\n\n      if (!hist) {\n         hist = createHistogram(clTH1D, 100);\n         hist.fBits |= kNoStats;\n      }\n\n      if (!opt && getElementMainPainter(dom))\n         opt = 'same';\n\n      const painter = new TF1Painter(dom, hist);\n\n      painter.$func = tf1;\n      Object.assign(painter, web);\n\n      painter.createTF1Histogram(tf1, hist);\n\n      return THistPainter._drawHist(painter, opt);\n   }\n\n} // class TF1Painter\n\nexport { TF1Painter, produceTAxisLogScale, scanTF1Options };\n","import { TGraphPainter as TGraphPainter2D } from '../hist2d/TGraphPainter.mjs';\nimport { TH1Painter } from './TH1Painter.mjs';\nimport { createLineSegments, create3DLineMaterial } from '../base/base3d.mjs';\n\n\nclass TGraphPainter extends TGraphPainter2D {\n\n   /** @summary Draw TGraph points in 3D\n     * @private */\n   drawBins3D(fp, graph) {\n      if (!fp.mode3d || !fp.grx || !fp.gry || !fp.grz || !fp.toplevel)\n         return console.log('Frame painter missing base 3d elements');\n\n      if (fp.zoom_xmin !== fp.zoom_xmax)\n        if ((this.options.pos3d < fp.zoom_xmin) || (this.options.pos3d > fp.zoom_xmax)) return;\n\n      this.createGraphDrawAttributes(true);\n\n      const drawbins = this.optimizeBins(1000);\n      let first = 0, last = drawbins.length-1;\n\n      if (fp.zoom_ymin !== fp.zoom_ymax) {\n         while ((first < last) && (drawbins[first].x < fp.zoom_ymin)) first++;\n         while ((first < last) && (drawbins[last].x > fp.zoom_ymax)) last--;\n      }\n\n      if (first === last) return;\n\n      const pnts = [], grx = fp.grx(this.options.pos3d);\n      let p0 = drawbins[first];\n\n      for (let n = first + 1; n <= last; ++n) {\n         const p1 = drawbins[n];\n         pnts.push(grx, fp.gry(p0.x), fp.grz(p0.y),\n                   grx, fp.gry(p1.x), fp.grz(p1.y));\n         p0 = p1;\n      }\n\n      const lines = createLineSegments(pnts, create3DLineMaterial(this, graph));\n\n      fp.add3DMesh(lines, this, true);\n\n      fp.render3D(100);\n   }\n\n   /** @summary Draw axis histogram\n     * @private */\n   async drawAxisHisto() {\n      return TH1Painter.draw(this.getDrawDom(), this.createHistogram(), this.options.Axis);\n   }\n\n   static async draw(dom, graph, opt) {\n      return TGraphPainter._drawGraph(new TGraphPainter(dom, graph), opt);\n   }\n\n} // class TGraphPainter\n\nexport { TGraphPainter };\n"],"x_google_ignoreList":[0,1,2,3]}