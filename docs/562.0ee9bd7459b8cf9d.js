"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[562],{4562:(L,C,u)=>{u.r(C),u.d(C,{TRatioPlotPainter:()=>g});var m=u(1773),T=u(2454),w=u(1518),D=u(6898);class g extends T.tK{setGridsRange(o,_){let h=this.getObject();if(o===_){var i,l,e;let t=null===(i=this.getPadPainter())||void 0===i||null===(l=i.findPainterFor(h.fLowerPad,"lower_pad","TPad"))||void 0===l||null===(e=l.getFramePainter())||void 0===e?void 0:e.x_handle;if(!t)return;o=t.full_min,_=t.full_max}h.fGridlines.forEach(t=>{t.fX1=o,t.fX2=_})}redraw(){let o=this.getObject(),_=this.getPadPainter(),h=_.findPainterFor(o.fTopPad,"top_pad","TPad");h&&h.disablePadDrawing();let i=_.findPainterFor(o.fUpperPad,"upper_pad","TPad"),l=null==i?void 0:i.getMainPainter(),e=null==i?void 0:i.getFramePainter(),t=_.findPainterFor(o.fLowerPad,"lower_pad","TPad"),z=null==t?void 0:t.getMainPainter(),n=null==t?void 0:t.getFramePainter(),s=20,v=Promise.resolve(!0);if(i&&l&&e&&n&&!i._ratio_configured){i._ratio_configured=!0,l.options.Axis=0,s=l.getHisto().fYaxis.fLabelSize,s<1&&(s=Math.round(s*Math.min(i.getPadWidth(),i.getPadHeight())));let f=l.getHisto();f.fXaxis.fLabelSize=0,f.fXaxis.fTitle="",f.fYaxis.fLabelSize=s,f.fYaxis.fTitleSize=s,i.getRootPad().fTicky=1,v=i.redrawPad().then(()=>(e.o_zoom=e.zoom,e._ratio_low_fp=n,e._ratio_painter=this,e.zoom=function(p,P,r,d,a,c){return this._ratio_painter.setGridsRange(p,P),this._ratio_low_fp.o_zoom(p,P),this.o_zoom(p,P,r,d,a,c)},e.o_sizeChanged=e.sizeChanged,e.sizeChanged=function(){this.o_sizeChanged(),this._ratio_low_fp.fX1NDC=this.fX1NDC,this._ratio_low_fp.fX2NDC=this.fX2NDC,this._ratio_low_fp.o_sizeChanged()},!0))}return v.then(()=>{if(!t||!z||!n||!e||t._ratio_configured)return this;t._ratio_configured=!0,z.options.Axis=0;let f=z.getHisto();f.fXaxis.fTitle="x",f.fXaxis.fLabelSize=s,f.fXaxis.fTitleSize=s,f.fYaxis.fLabelSize=s,f.fYaxis.fTitleSize=s,t.getRootPad().fTicky=1,t.forEachPainterInPad(r=>{"function"==typeof(null==r?void 0:r.testEditable)&&r.testEditable(!1)});let P,p=[];return o.fGridlinePositions.length>0&&o.fGridlines.length<o.fGridlinePositions.length&&o.fGridlinePositions.forEach(r=>{let d=!1;if(o.fGridlines.forEach(a=>{a.fY1==a.fY2&&Math.abs(a.fY1-r)<1e-6&&(d=!0)}),!d){let a=(0,m.create)("TLine");a.fX1=e.scale_xmin,a.fX2=e.scale_xmax,a.fY1=a.fY2=r,a.fLineStyle=2,o.fGridlines.push(a),void 0===P&&(P=this.selectCurrentPad(o.fLowerPad.fName)),p.push((0,D.drawTLine)(this.getDom(),a))}}),Promise.all(p).then(()=>n.zoom(e.scale_xmin,e.scale_xmax)).then(()=>(n.o_zoom=n.zoom,n._ratio_up_fp=e,n._ratio_painter=this,n.zoom=function(r,d,a,c,E,X){return this._ratio_painter.setGridsRange(r,d),this._ratio_up_fp.o_zoom(r,d),this.o_zoom(r,d,a,c,E,X)},n.o_sizeChanged=n.sizeChanged,n.sizeChanged=function(){this.o_sizeChanged(),this._ratio_up_fp.fX1NDC=this.fX1NDC,this._ratio_up_fp.fX2NDC=this.fX2NDC,this._ratio_up_fp.o_sizeChanged()},this))})}static draw(o,_,h){let i=new g(o,_,h);return(0,w.ensureTCanvas)(i,!1).then(()=>i.redraw())}}}}]);
//# sourceMappingURL=562.0ee9bd7459b8cf9d.js.map