"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[897],{5897:(H,P,u)=>{u.r(P),u.d(P,{TMultiGraphPainter:()=>g});var y=u(1773),M=u(5611),O=u(2454),G=u(9608),F=u(3879);class p extends O.tK{constructor(i,a){super(i,a),this.firstpainter=null,this.autorange=!1,this.painters=[]}cleanup(){this.painters=[],super.cleanup()}updateObject(i){var a,e;if(!this.matchObjectType(i))return!1;let h=this.getObject(),n=i.fGraphs,f=this.getPadPainter();h.fTitle=i.fTitle;let l=!1;if(this.firstpainter){let r=i.fHistogram;this.autorange&&!r&&(r=this.scanGraphsRange(n)),this.firstpainter.updateObject(r)&&(l=!0)}for(let r=0;r<n.arr.length;++r)r<this.painters.length&&this.painters[r].updateObject(n.arr[r])&&(l=!0);return null===(a=i.fFunctions)||void 0===a||null===(e=a.arr)||void 0===e||e.forEach(r=>{var x;null!=r&&r._typename&&null!=r&&r.fName&&(null==f||null===(x=f.findPainterFor(null,r.fName,r._typename))||void 0===x||x.updateObject(r))}),l}scanGraphsRange(i,a,e){let n,f,l,r,h=this.getObject(),x=0,c=0,T=!1,d=!1,v=!1,w="",t={xmin:0,xmax:0,ymin:0,ymax:0,first:!0};if(e&&(T=e.fLogx,d=e.fLogy,t.xmin=e.fUxmin,t.xmax=e.fUxmax,t.ymin=e.fUymin,t.ymax=e.fUymax,t.first=!1),this._3d&&a&&!a.fXaxis.fLabels&&(a=null),a){if(f=a.fYaxis.fXmin,n=a.fYaxis.fXmax,e){const m=s=>e.fLogx&&s<50?Math.exp(2.302585092994*s):s;x=m(t.xmin),c=m(t.xmax)}}else this.autorange=!0,i.arr.forEach(m=>{if(0!=m.fNpoints){t.first&&(t.xmin=t.xmax=m.fX[0],t.ymin=t.ymax=m.fY[0],t.first=!1);for(let s=0;s<m.fNpoints;++s)t.xmin=Math.min(t.xmin,m.fX[s]),t.xmax=Math.max(t.xmax,m.fX[s]),t.ymin=Math.min(t.ymin,m.fY[s]),t.ymax=Math.max(t.ymax,m.fY[s])}}),i.arr[0]&&i.arr[0].fHistogram&&i.arr[0].fHistogram.fXaxis.fTimeDisplay&&(v=!0,w=i.arr[0].fHistogram.fXaxis.fTimeFormat),t.xmin==t.xmax&&(t.xmax+=1),t.ymin==t.ymax&&(t.ymax+=1),l=.05*(t.xmax-t.xmin),r=.05*(t.ymax-t.ymin),x=t.xmin-l,c=t.xmax+l,d?(t.ymin<=0&&(t.ymin=.001*t.ymax),f=t.ymin/(1+.5*Math.log10(t.ymax/t.ymin)),n=t.ymax*(1+.2*Math.log10(t.ymax/t.ymin))):(f=t.ymin-r,n=t.ymax+r),f<0&&t.ymin>=0&&(f=0),n>0&&t.ymax<=0&&(n=0);if(x<0&&t.xmin>=0&&(x=T?.9*t.xmin:0),c>0&&t.xmax<=0&&(c=T?1.1*t.xmax:0),-1111!=h.fMinimum&&(t.ymin=f=h.fMinimum),-1111!=h.fMaximum&&(t.ymax=n=h.fMaximum),f<0&&t.ymin>=0&&d&&(f=.9*t.ymin),n>0&&t.ymax<=0&&d&&(n=1.1*t.ymax),f<=0&&d&&(f=.001*n),!d&&f>0&&f<.05*n&&(f=0),x<=0&&T&&(x=c>1e3?1:.001*c),!a){let m,s;if(this._3d){m=(a=(0,y.create)("TH2I")).fXaxis,m.fXmin=0,m.fXmax=i.arr.length,m.fNbins=i.arr.length,m.fLabels=(0,y.create)("THashList");for(let o=0;o<i.arr.length;o++){let X=(0,y.create)("TObjString");X.fString=i.arr[o].fTitle||`gr${o}`,X.fUniqueID=i.arr.length-o,m.fLabels.Add(X,"")}m=a.fYaxis,s=a.fZaxis}else m=(a=(0,y.create)("TH1I")).fXaxis,s=a.fYaxis;if(a.fTitle=h.fTitle,a.fTitle.indexOf(";")>=0){let o=a.fTitle.split(";");a.fTitle=o[0],o[1]&&(m.fTitle=o[1]),o[2]&&(s.fTitle=o[2])}m.fXmin=x,m.fXmax=c,m.fTimeDisplay=v,v&&(m.fTimeFormat=w)}return this._3d?(a.fMinimum=f,a.fMaximum=n):(a.fYaxis.fXmin=f,a.fYaxis.fXmax=n),a}drawAxisHist(i,a){return G.f.draw(this.getDom(),i,"AXIS"+a)}drawNextFunction(i){let a=this.getObject();return!a.fFunctions||i>=a.fFunctions.arr.length?Promise.resolve(this):this.getPadPainter().drawObject(this.getDom(),a.fFunctions.arr[i],a.fFunctions.opt[i]).then(()=>this.drawNextFunction(i+1))}drawGraph(i,a){return F.TGraphPainter.draw(this.getDom(),i,a)}drawNextGraph(i,a){let e=this.getObject().fGraphs;if(i>=e.arr.length)return this._pfc=this._plc=this._pmc=!1,this.drawNextFunction(0);if(this._pfc||this._plc||this._pmc){let n=this.getMainPainter();if("function"==typeof(null==n?void 0:n.createAutoColor)){let f=n.createAutoColor(e.arr.length);this._pfc&&(e.arr[i].fFillColor=f),this._plc&&(e.arr[i].fLineColor=f),this._pmc&&(e.arr[i].fMarkerColor=f)}}return this.drawGraph(e.arr[i],e.opt[i]||a||"",e.arr.length-i).then(n=>(n&&this.painters.push(n),this.drawNextGraph(i+1,a)))}static _drawMG(i,a){let e=new M.pc(a);i._3d=e.check("3D"),i._pfc=e.check("PFC"),i._plc=e.check("PLC"),i._pmc=e.check("PMC");let h="";["USE_PAD_TITLE","LOGXY","LOGX","LOGY","LOGZ","GRIDXY","GRIDX","GRIDY","TICKXY","TICKX","TICKY","FB"].forEach(l=>{e.check(l)&&(h+=";"+l)});let f=Promise.resolve(!0);if(e.check("A")||!i.getMainPainter()){let l=i.getObject(),r=i.getPadPainter(),x=i.scanGraphsRange(l.fGraphs,l.fHistogram,null==r?void 0:r.getRootPad(!0));f=i.drawAxisHist(x,h).then(c=>{i.firstpainter=c,c.$secondary=!0})}return f.then(()=>(i.addToPadPrimitives(),i.drawNextGraph(0,e.remain())))}static draw(i,a,e){return p._drawMG(new p(i,a),e)}}var D=u(5759),Y=u(3767);class g extends p{drawAxisHist(i,a){return this._3d?D.TH2Painter.draw(this.getDom(),i,"AXIS3D"+a):G.f.draw(this.getDom(),i,"AXIS"+a)}drawGraph(i,a,e){return this._3d&&(a+="pos3d_"+e),Y.o.draw(this.getDom(),i,a)}static draw(i,a,e){return g._drawMG(new g(i,a),e)}}}}]);
//# sourceMappingURL=897.d18289edb428691f.js.map